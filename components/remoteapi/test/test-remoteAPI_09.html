<!--
/*
 //
// BEGIN SONGBIRD GPL
//
// This file is part of the Songbird web player.
//
// Copyright(c) 2005-2007 POTI, Inc.
// http://songbirdnest.com
//
// This file may be licensed under the terms of of the
// GNU General Public License Version 2 (the "GPL").
//
// Software distributed under the License is distributed
// on an "AS IS" basis, WITHOUT WARRANTY OF ANY KIND, either
// express or implied. See the GPL for the specific language
// governing rights and limitations.
//
// You should have received a copy of the GPL along with this
// program. If not, go to http://www.gnu.org/licenses/gpl.html
// or write to the Free Software Foundation, Inc.,
// 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
//
// END SONGBIRD GPL
//
 */
-->

<html>
  <head>
    <title>Remote API Test: 09</title>
    <script>
      var siteLib;
      var mainLib;
      var originalPlaylist = true;
      var init = false;
      var playlist1;
      var playlist2;
      var originalWeb;
      var m3uMediaList;
      var mlist;
      var myDiv;

      var load = function load() {
        dump("\nXXXredfive - load\n\n");
        /*
        songbird.commands.addCommand( "action",
                                      "setwebplaylist",
                                      "Set Playlist",
                                      "Set Playlist" );
        document.addEventListener( "setwebplaylist", setPlaylist, true );
        */

        myDiv = document.getElementById("output");
        siteLib = songbird.siteLibrary("", "/");
        mainLib = songbird.libraries("main");

        originalWeb = songbird.webPlaylist;
        playlist1 = siteLib.createMediaList("simple");
        playlist2 = siteLib.createMediaList("simple");
        playlist1.name = "foo - empty";
        playlist2.name = "bar - empty";
        init = true;
      }

      // toggle between web and empty playlist
      var togglePlaylist = function() {
        if (originalPlaylist) {
          songbird.webPlaylist = playlist1;
        } else {
          songbird.webPlaylist = originalWeb;
        }
        originalPlaylist = !originalPlaylist;
      }

      var setPlaylist = function setPlaylist (aEvent) {
        if (!mlist) {
          mlist = siteLib.createMediaList("simple");
          mlist.name = "foo";
        }
        songbird.webPlaylist = mlist;

        myDiv.appendChild(document.createTextNode("mList name: " + mlist.name + " length: " + mlist.length));
        myDiv.appendChild(document.createTextNode("webPlaylist name: " + songbird.webPlaylist.name + " length: " + songbird.webPlaylist.length));
        myDiv.appendChild(document.createTextNode("<br />"));
      }


      var setWebPlaylist = function setWebPlaylist() {
        var mediaList = siteLib.createMediaList("simple");
        mediaList.add(siteLib.createMediaItem("http://www.jgaunt.com/uploads/sheryl_crow_soak_up_the_sun.mp3"));
        mediaList.add(siteLib.createMediaItem("http://www.jgaunt.com/uploads/presidents_of_the_united_states_of_america_naked_and_famous.mp3"));
        mediaList.name = "Test List - 2 songs";
        songbird.webPlaylist = mediaList;
      }

      var setM3UPlaylist = function setM3UPlaylist() {
        if (!m3uMediaList) {
          m3uMediaList = siteLib.createMediaListFromFile("http://www.jgaunt.com/uploads/uploads.m3u");
          m3uMediaList.name = "m3u Test List";
        }
        songbird.webPlaylist = m3uMediaList;
      }

      // Set the site library as the web playlist
      var setMain = function setMain() {
        songbird.webPlaylist = mainLib;
      }
      
      // Set the site library as the web playlist
      var setSite = function setSite() {
        songbird.webPlaylist = siteLib;
      }
      
    </script>
  </head>

  <body onload="load();">
    <h1>Creation of MediaList from a Library and setting as webplaylist</h1>
    <p> Force a web playlist to appear. <br />
      <a href="http://users.igl.net/unicorn/Black_Sabbath-_Iron_man.mp3">IronMan</a>
      <a href="http://www.jgaunt.com/uploads/sheryl_crow_soak_up_the_sun.mp3">Sheryl Crow</a>
    <form>
      <input type="button" id="toggle_button" value="Toggle"
             onclick="togglePlaylist();" /> 
      <br />
      <input type="button" id="set_button" value="Set test list"
             onclick="setWebPlaylist();" /> 
      <br />
      <input type="button" id="make_m3u_button" value="Set From File"
             onclick="setM3UPlaylist();" /> 
      <br />
      <input type="button" id="set_site_button" value="Set Site Lib"
             onclick="setSite();" /> 
      <br />
      <input type="button" id="set_main_button" value="Set Main Lib"
             onclick="setMain();" /> 
      <br />
    </form>
    </p>
    <div id="output">
    </div>
  </body>

</html>

