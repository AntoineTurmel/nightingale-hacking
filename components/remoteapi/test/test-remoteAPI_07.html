<!--
/*
 //
// BEGIN SONGBIRD GPL
//
// This file is part of the Songbird web player.
//
// Copyright(c) 2005-2007 POTI, Inc.
// http://songbirdnest.com
//
// This file may be licensed under the terms of of the
// GNU General Public License Version 2 (the "GPL").
//
// Software distributed under the License is distributed
// on an "AS IS" basis, WITHOUT WARRANTY OF ANY KIND, either
// express or implied. See the GPL for the specific language
// governing rights and limitations.
//
// You should have received a copy of the GPL along with this
// program. If not, go to http://www.gnu.org/licenses/gpl.html
// or write to the Free Software Foundation, Inc.,
// 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
//
// END SONGBIRD GPL
//
 */
-->

<html>
  <head>
    <title>Remote API Test: 07</title>
    <script>
      var originalCommand = true;
      var toggleCommand = function() {
        if (originalCommand) {
          songbird.commands.addCommand( "action",
                                        "toggled-command",
                                        "toggle",
                                        "toggle" );
        } else {
          songbird.commands.removeCommand("toggled-command");
        }
        originalCommand = !originalCommand;
      }

      var addCommand = function() {
          songbird.commands.addCommand( "action",
                                        "toggled-command2",
                                        "toggle",
                                        "toggle" );
      }

      var removeCommand = function() {
          songbird.commands.removeCommand("toggled-command2");
      }

    </script>
  </head>
  <body onunload="document.removeEventListener('remoteapi', onRemoteAPI, true);
                  document.removeEventListener('rapi-test07-play-url', onPlayURL, true);">
    <h1>RemoteCommand registration, object access, callbacks</h1>
    <p> create a remoteCommand, get callbacks for it's events and see
        callbacks happen. </p>
    <br />
    <p> Force a web playlist to appear. <br />
      <a href="http://users.igl.net/unicorn/Black_Sabbath-_Iron_man.mp3">IronMan</a>
      <a href="http://www.jgaunt.com/uploads/sheryl_crow_soak_up_the_sun.mp3">Sheryl Crow</a>
    </p>
    <form>
      <input type="button" id="toggle_button" value="Toggle"
             onclick="toggleCommand();" /> 
      <br />
      <input type="button" id="toggle_button" value="Add Command"
             onclick="addCommand();" /> 
      <br />
      <input type="button" id="toggle_button" value="Remove Command"
             onclick="removeCommand();" /> 
    </form>
    <div id="accessCountDiv">
    </div>
    <div id="remoteCommandDiv">
    </div>
    <script>
      var accessCount = 0;

      var onPlaySelected =  function onPlaySelected(aEvent) {
          var myDiv = document.getElementById("remoteCommandDiv");
          myDiv.appendChild(document.createTextNode("Play Selected Track"));
          myDiv.appendChild(document.createElement("br"));
          // Probably want this to be playWebPlaylist or something,
          //  or have the songbird object check for webPlaylist first.
          songbird.play();
      }

      var onPlayURL =  function onPlayURL(aEvent) {
          var myDiv = document.getElementById("remoteCommandDiv");
          myDiv.appendChild(document.createTextNode("Play URL - sheryl crow"));
          myDiv.appendChild(document.createElement("br"));
          songbird.playURL('http://www.jgaunt.com/uploads/sheryl_crow_soak_up_the_sun.mp3');
      }

      var onRemoteAPI =  function onRemoteAPI(aEvent) {
        var myDiv = document.getElementById("accessCountDiv");
        if (aEvent.type == "remoteapi") {
          myDiv.appendChild(document.createTextNode("Remote API Accessed:" + (++accessCount) + "<br />" ));
          myDiv.appendChild(document.createElement("br"));
        }
      };

      // hook listeners to command from this page and the general RemoteAPI event
      document.addEventListener( "remoteapi", onRemoteAPI, true );
      document.addEventListener( "rapi-test07-play-url", onPlayURL, true );
      document.addEventListener( "rapi-test07-play-selected", onPlaySelected, true );

      // add a command to the RemoteAPI's collection of commands
/*
      // XXXredfive the submenu implementation for remote commands is broken 
      songbird.commands.addCommand( "submenu",
                                    "rapi-test-07-submenu",
                                    "Play URL",
                                    "Play the preset URL" );
*/


      songbird.commands.setCommandData( 3,
                                        ["action","separator", "action"],
                                        ["rapi-test07-play-url","rapi-test07-play-sep","rapi-test07-play-selected"],
                                        ["Play URL","sep","Play Track"],
                                        ["Play the preset URL","separate","Play the selected Track(not yet)"] );
      songbird.commands.removeCommand("rapi-test-07-submenu");

      /*
      // add a command to the RemoteAPI's collection of commands
      songbird.commands.addCommand( "action",
                                    "rapi-test07-play-url",
                                    "Play URL",
                                    "Play the preset URL" );

      // add a command to the RemoteAPI's collection of commands
      songbird.commands.addCommand( "separator",
                                    "rapi-test07-play-sep",
                                    "Play URL",
                                    "Play the preset URL" );

      // add a command to play the selected track in the playlist
      songbird.commands.addCommand( "action",
                                    "rapi-test07-play-selected",
                                    "Play Track",
                                    "Play the Selected Track(s)" );
      */

    </script>
    
  </body>
</html>

