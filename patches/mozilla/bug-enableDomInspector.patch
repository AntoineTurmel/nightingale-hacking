? bug-enableDomInspector.patch
? sanity.diff
Index: extensions/inspector/install.rdf
===================================================================
RCS file: /cvsroot/mozilla/extensions/inspector/install.rdf,v
retrieving revision 1.15
diff -u -p -r1.15 install.rdf
--- extensions/inspector/install.rdf	29 Aug 2007 18:05:30 -0000	1.15
+++ extensions/inspector/install.rdf	31 Aug 2007 18:44:32 -0000
@@ -53,6 +53,15 @@
       </Description>
     </em:targetApplication>
 
+    <em:targetApplication>
+      <!-- Songbird -->
+      <Description>
+        <em:id>songbird@songbirdnest.com</em:id>
+        <em:minVersion>0.2</em:minVersion>
+        <em:maxVersion>0.5</em:maxVersion>
+      </Description>
+    </em:targetApplication>
+     
     <!-- EXTENSION AUTHORS!
          DO NOT COPY THIS PROPERTY INTO YOUR INSTALL RDF FILES
          It will cause users not to be informed of incompatibilities
Index: extensions/inspector/jar.mn
===================================================================
RCS file: /cvsroot/mozilla/extensions/inspector/jar.mn,v
retrieving revision 1.33
diff -u -p -r1.33 jar.mn
--- extensions/inspector/jar.mn	23 Aug 2007 03:26:38 -0000	1.33
+++ extensions/inspector/jar.mn	31 Aug 2007 18:44:32 -0000
@@ -9,6 +9,7 @@ inspector.jar:
 % overlay chrome://inspector/content/inspector.xul chrome://browser/content/baseMenuOverlay.xul application={ec8030f7-c20a-464f-9b0e-13a3a9e97384}
 % overlay chrome://calendar/content/calendar.xul chrome://inspector/content/tasksOverlay-sb.xul application={718e30fb-e89b-41dd-9da7-e25a45638b28}
 % overlay chrome://messenger/content/mailWindowOverlay.xul chrome://inspector/content/tasksOverlay-tb.xul application={3550f703-e582-4d05-9a08-453d09bdfdc6}
+% overlay chrome://songbird/content/xul/menuOverlay.xul chrome://inspector/content/tasksOverlay-songbird.xul application=songbird@songbirdnest.com
 % overlay chrome://inspector/content/commandOverlay.xul chrome://inspector/content/viewers/dom/commandOverlay.xul
 % overlay chrome://inspector/content/commandOverlay.xul chrome://inspector/content/viewers/styleRules/commandOverlay.xul
 % overlay chrome://inspector/content/keysetOverlay.xul chrome://inspector/content/viewers/dom/keysetOverlay.xul
@@ -31,6 +32,7 @@ inspector.jar:
   content/inspector/tasksOverlay.xul                                  (resources/content/tasksOverlay.xul)
   content/inspector/tasksOverlay-ff.xul                               (resources/content/tasksOverlay-ff.xul)
   content/inspector/tasksOverlay-sb.xul                               (resources/content/tasksOverlay-sb.xul)
+  content/inspector/tasksOverlay-songbird.xul                         (resources/content/tasksOverlay-songbird.xul)
   content/inspector/tasksOverlay-tb.xul                               (resources/content/tasksOverlay-tb.xul)
   content/inspector/editingOverlay.xul                                (resources/content/editingOverlay.xul)
   content/inspector/utilWindow.xul                                    (resources/content/utilWindow.xul)
Index: extensions/inspector/resources/content/tasksOverlay-songbird.xul
===================================================================
RCS file: extensions/inspector/resources/content/tasksOverlay-songbird.xul
diff -N extensions/inspector/resources/content/tasksOverlay-songbird.xul
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ extensions/inspector/resources/content/tasksOverlay-songbird.xul	31 Aug 2007 18:44:32 -0000
@@ -0,0 +1,43 @@
+<?xml version="1.0"?>
+
+<!DOCTYPE overlay SYSTEM "chrome://inspector/locale/tasksOverlay.dtd" >
+
+<overlay id="eInspectorTasksOverlay"
+         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
+
+  <script type="application/x-javascript" src="chrome://inspector/content/hooks.js"/>
+  <script type="application/x-javascript">
+  <![CDATA[
+    function inspectorWindowLoad()
+    {
+      setTimeout(initWindowMediator, 0);
+    }
+
+    function initWindowMediator()
+    {
+      // Load the Window DataSource so that browser windows opened subsequent to DOM
+      // Inspector show up in the DOM Inspector's window list.
+      var windowDS = Components.classes["@mozilla.org/rdf/datasource;1?name=window-mediator"]
+                               .getService(Components.interfaces.nsIWindowDataSource);
+    }
+
+    window.addEventListener("load", inspectorWindowLoad, false);
+  ]]>
+  </script>
+
+  <commandset id="mainCommandSet">
+    <command id="Tasks:Inspector" oncommand="inspectDOMDocument();"/>
+    <command id="Tasks:InspectPage" oncommand="inspectDOMDocument(content.document);"/>
+  </commandset>
+
+  <keyset id="mainKeyset">
+    <key id="key_inspectPage" key="&inspectorTaskCmd.commandkey;" modifiers="accel,shift" command="Tasks:Inspector"/>
+  </keyset>
+  
+  <menupopup id="menu_ToolsPopup">
+    <menuitem id="menu_inspector" label="&inspectorTaskCmd.label;"
+              insertafter="javascriptConsole" key="key_inspectPage"
+              accesskey="&inspectorTaskCmd.accesskey.ff;" command="Tasks:Inspector"/>
+  </menupopup>
+
+</overlay>
