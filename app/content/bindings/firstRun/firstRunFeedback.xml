<?xml version="1.0"?>
<!--
/*
//
// BEGIN SONGBIRD GPL
//
// This file is part of the Songbird web player.
//
// Copyright(c) 2005-2008 POTI, Inc.
// http://songbirdnest.com
//
// This file may be licensed under the terms of of the
// GNU General Public License Version 2 (the "GPL").
//
// Software distributed under the License is distributed
// on an "AS IS" basis, WITHOUT WARRANTY OF ANY KIND, either
// express or implied. See the GPL for the specific language
// governing rights and limitations.
//
// You should have received a copy of the GPL along with this
// program. If not, go to http://www.gnu.org/licenses/gpl.html
// or write to the Free Software Foundation, Inc.,
// 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
//
// END SONGBIRD GPL
//
 */
-->

<!-- Import external definitions. -->
<!DOCTYPE window [
<!ENTITY % brandDTD SYSTEM "chrome://branding/locale/brand.dtd">
<!ENTITY % songbirdDTD SYSTEM "chrome://songbird/locale/songbird.dtd">
%brandDTD;
%songbirdDTD;
]>

<bindings
      xmlns="http://www.mozilla.org/xbl"
      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
      xmlns:xbl="http://www.mozilla.org/xbl">

  <!-- *************************************************************************
   *****************************************************************************
   *
   * First-run feedback widget.
   *
   *   This widget provides first-run user feedback UI.
   *
   * Methods:
   *
   *   saveSettings             Save the user settings in the first-run wizard
   *                            page.
   *
   *****************************************************************************
   ************************************************************************* -->

  <binding id="sb-first-run-feedback">

    <!-- ***********************************************************************
     *
     * Content.
     *
     *********************************************************************** -->

    <content>

      <xul:vbox anonid="container_box" class="sb-first-run-feedback-box">

        <!-- Header and description. -->
        <xul:label class="sb-first-run-header"
                   value="&first_run.feedback.header.label;"/>
        <xul:description>
          &first_run.feedback.description;
        </xul:description>

        <!-- Options box. -->
        <xul:vbox anonid="options_box" class="indent">

          <!-- Metrics collection checkbox. -->
          <xul:checkbox anonid="metrics_checkbox"
                        label="&first_run.feedback.metrics.label;"
                        checked="true"/>
          <xul:description class="indent sb-first-run-checkbox-description">
            &first_run.feedback.metrics.description;
          </xul:description>

          <!-- Survey checkbox. -->
          <xul:checkbox anonid="survey_checkbox"
                        label="&first_run.feedback.survey.label;"
                        checked="true"/>
          <xul:description class="indent sb-first-run-checkbox-description">
            &first_run.feedback.survey.description;
          </xul:description>

       </xul:vbox> <!-- options_box -->

      </xul:vbox> <!-- container_box -->

    </content>


    <!-- ***********************************************************************
     *
     * Implementation.
     *
     *********************************************************************** -->

    <implementation>

      <!--
       * Save the user settings in the first-run wizard page.
       -->

      <method name="saveSettings"><body><![CDATA[
        // Save the metrics collection setting.
        var metricsCheckbox =
              document.getAnonymousElementByAttribute(this,
                                                      "anonid",
                                                      "metrics_checkbox");
        var metricsEnabled = metricsCheckbox.checked ? "1" : "0";
        Application.prefs.setValue("app.metrics.enabled", metricsEnabled);

        // Save the survey setting.
        var surveyCheckbox =
              document.getAnonymousElementByAttribute(this,
                                                      "anonid",
                                                      "survey_checkbox");
        var surveyEnabled = surveyCheckbox.checked ? "1" : "0";
        Application.prefs.setValue("app.survey.enabled", surveyEnabled);
      ]]></body></method>

    </implementation>

  </binding>

</bindings>

