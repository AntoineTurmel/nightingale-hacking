<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Songbird: sbIMetadataHandler Interface Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>sbIMetadataHandler Interface Reference</h1><!-- doxytag: class="sbIMetadataHandler" -->An object capable of returning the metadata from the url to a file.  
<a href="#_details">More...</a>
<p>
<a href="interfacesb_i_metadata_handler-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">PRInt32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacesb_i_metadata_handler.html#e458a8ab0d74624ad43d7592c9fb548d">vote</a> (in AString aUrl)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Vote to be the handler returned for the given url.  <a href="#e458a8ab0d74624ad43d7592c9fb548d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacesb_i_metadata_handler.html#0e2be754f36f62a4984cb56576142ee4">supportedMIMETypes</a> (out PRUint32 nMIMECount,[array, size_is(nMIMECount), retval] out wstring aMIMETypes)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the mimetypes supported by this handler (probably DEPRECATED).  <a href="#0e2be754f36f62a4984cb56576142ee4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacesb_i_metadata_handler.html#7a6c8e683a208b6acae06a6ea4edd3b7">supportedFileExtensions</a> (out PRUint32 nExtCount,[array, size_is(nExtCount), retval] out wstring aExts)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the extensions supported by this handler (probably DEPRECATED).  <a href="#7a6c8e683a208b6acae06a6ea4edd3b7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">PRInt32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacesb_i_metadata_handler.html#089f9e2ab8e3494dc72dae7e937b0a56">read</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start the read operation.  <a href="#089f9e2ab8e3494dc72dae7e937b0a56"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">PRInt32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacesb_i_metadata_handler.html#5ebeaf138cfa866b44ad8aceccd4174c">write</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start the write operation.  <a href="#5ebeaf138cfa866b44ad8aceccd4174c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacesb_i_metadata_handler.html#420316e8648548ba5172a4c4544d7333">onChannelData</a> (in nsISupports aChannel)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Be thou informst that one's <a class="el" href="interfacesb_i_metadata_channel.html">sbIMetadataChannel</a> has just received data.  <a href="#420316e8648548ba5172a4c4544d7333"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="761c2ace034fbc0f6e4ace75968b224a"></a><!-- doxytag: member="sbIMetadataHandler::close" ref="761c2ace034fbc0f6e4ace75968b224a" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacesb_i_metadata_handler.html#761c2ace034fbc0f6e4ace75968b224a">close</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Close down the internals of the handler, stop any downloads, free any allocations. <br></td></tr>
<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">attribute <a class="el" href="interfacesb_i_metadata_values.html">sbIMetadataValues</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacesb_i_metadata_handler.html#0d705e855c88cb318a6ecbf69d0ea546">values</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The values object containing the metadata information.  <a href="#0d705e855c88cb318a6ecbf69d0ea546"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">readonly attribute PRBool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacesb_i_metadata_handler.html#978827eef884f62ce9da10d1344632a1">completed</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Whether or not the object has completed its <a class="el" href="interfacesb_i_metadata_handler.html#089f9e2ab8e3494dc72dae7e937b0a56">read()</a> operation.  <a href="#978827eef884f62ce9da10d1344632a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">attribute nsIChannel&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacesb_i_metadata_handler.html#8311aa7b7bc4102d02465b47ded3e7f3">channel</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The object's nsIChannel.  <a href="#8311aa7b7bc4102d02465b47ded3e7f3"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
An object capable of returning the metadata from the url to a file. 
<p>
User code requests a handler by calling <a class="el" href="interfacesb_i_metadata_manager.html#ae19d169e02736347d183bf89ae8ffa6">sbIMetadataManager::getHandlerForMediaURL</a> that then returns one of these.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="interfacesb_i_metadata_manager.html">sbIMetadataManager</a> </dd></dl>

<p>

<p>
Definition at line <a class="el" href="sb_i_metadata_handler_8idl-source.html#l00045">45</a> of file <a class="el" href="sb_i_metadata_handler_8idl-source.html">sbIMetadataHandler.idl</a>.<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="420316e8648548ba5172a4c4544d7333"></a><!-- doxytag: member="sbIMetadataHandler::onChannelData" ref="420316e8648548ba5172a4c4544d7333" args="(in nsISupports aChannel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sbIMetadataHandler::onChannelData           </td>
          <td>(</td>
          <td class="paramtype">in nsISupports&nbsp;</td>
          <td class="paramname"> <em>aChannel</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Be thou informst that one's <a class="el" href="interfacesb_i_metadata_channel.html">sbIMetadataChannel</a> has just received data. 
<p>
Every time the underlying nsIChannel dumps data on the <a class="el" href="interfacesb_i_metadata_channel.html">sbIMetadataChannel</a>, plus once more for when the nsIChannel reports a stop condition.<p>
This is a chance for the handler code to attempt to parse the datastream.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>aChannel</em>&nbsp;</td><td>The <a class="el" href="interfacesb_i_metadata_channel.html">sbIMetadataChannel</a> delivering data. You'll have to QI for it. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="089f9e2ab8e3494dc72dae7e937b0a56"></a><!-- doxytag: member="sbIMetadataHandler::read" ref="089f9e2ab8e3494dc72dae7e937b0a56" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PRInt32 sbIMetadataHandler::read           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Start the read operation. 
<p>
After getting a handler from the <a class="el" href="interfacesb_i_metadata_manager.html">sbIMetadataManager</a>, the user code usually calls read upon it, immediately. The implementor may choose to handle the request immediately or asynchronously.<p>
<dl compact><dt><b>Returns:</b></dt><dd>-1 if operating asynchronously, otherwise the number of metadata values read (0 on failure) </dd></dl>

</div>
</div><p>
<a class="anchor" name="7a6c8e683a208b6acae06a6ea4edd3b7"></a><!-- doxytag: member="sbIMetadataHandler::supportedFileExtensions" ref="7a6c8e683a208b6acae06a6ea4edd3b7" args="(out PRUint32 nExtCount,[array, size_is(nExtCount), retval] out wstring aExts)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sbIMetadataHandler::supportedFileExtensions           </td>
          <td>(</td>
          <td class="paramtype">out PRUint32&nbsp;</td>
          <td class="paramname"> <em>nExtCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">[array, size_is(nExtCount), retval] out wstring&nbsp;</td>
          <td class="paramname"> <em>aExts</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the extensions supported by this handler (probably DEPRECATED). 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000007">Todo:</a></b></dt><dd>Make sure it's safe to deprecate these. Only the cores should need to return mimetype/extension info, I think. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nExtCount</em>&nbsp;</td><td>The number of extensions returned in the array </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>aExts</em>&nbsp;</td><td>The array of extensions supported by this handler </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="0e2be754f36f62a4984cb56576142ee4"></a><!-- doxytag: member="sbIMetadataHandler::supportedMIMETypes" ref="0e2be754f36f62a4984cb56576142ee4" args="(out PRUint32 nMIMECount,[array, size_is(nMIMECount), retval] out wstring aMIMETypes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sbIMetadataHandler::supportedMIMETypes           </td>
          <td>(</td>
          <td class="paramtype">out PRUint32&nbsp;</td>
          <td class="paramname"> <em>nMIMECount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">[array, size_is(nMIMECount), retval] out wstring&nbsp;</td>
          <td class="paramname"> <em>aMIMETypes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the mimetypes supported by this handler (probably DEPRECATED). 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000006">Todo:</a></b></dt><dd>Make sure it's safe to deprecate these. Only the cores should need to return mimetype/extension info, I think. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nMIMECount</em>&nbsp;</td><td>The number of mimetypes returned in the array </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>aMIMETypes</em>&nbsp;</td><td>The array of mimetypes supported by this handler </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="e458a8ab0d74624ad43d7592c9fb548d"></a><!-- doxytag: member="sbIMetadataHandler::vote" ref="e458a8ab0d74624ad43d7592c9fb548d" args="(in AString aUrl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PRInt32 sbIMetadataHandler::vote           </td>
          <td>(</td>
          <td class="paramtype">in AString&nbsp;</td>
          <td class="paramname"> <em>aUrl</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Vote to be the handler returned for the given url. 
<p>
The <a class="el" href="interfacesb_i_metadata_manager.html">sbIMetadataManager</a> will instantiate one of every <a class="el" href="interfacesb_i_metadata_handler.html">sbIMetadataHandler</a> subclass and ask it to vote on the given url. Whichever handler returns the highest vote will be used as the handler for the url.<p>
Values less than zero cause that handler to be ignored.<p>
At the moment, our handlers return -1, 0, or 1 (for "no," "maybe," and "yes").<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>aUrl</em>&nbsp;</td><td>The url upon which one should vote </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The vote </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="interfacesb_i_metadata_manager.html">sbIMetadataManager</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="5ebeaf138cfa866b44ad8aceccd4174c"></a><!-- doxytag: member="sbIMetadataHandler::write" ref="5ebeaf138cfa866b44ad8aceccd4174c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PRInt32 sbIMetadataHandler::write           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Start the write operation. 
<p>
After getting a handler from the <a class="el" href="interfacesb_i_metadata_manager.html">sbIMetadataManager</a>, the user code may set an <a class="el" href="interfacesb_i_metadata_values.html">sbIMetadataValues</a> object into the handler and then call write to write the abstract metadata map into the specific metadata requirements of the file format supported by the handler.<p>
Note that the number of items written may not always equal the number of items in the <a class="el" href="interfacesb_i_metadata_values.html">sbIMetadataValues</a> object if the underlying file format does not support the given keys.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000008">Todo:</a></b></dt><dd>Make anything actually work with a write operation </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>-1 if operating asynchronously, otherwise the number of metadata values written (0 on failure) </dd></dl>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="8311aa7b7bc4102d02465b47ded3e7f3"></a><!-- doxytag: member="sbIMetadataHandler::channel" ref="8311aa7b7bc4102d02465b47ded3e7f3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">attribute nsIChannel <a class="el" href="interfacesb_i_metadata_handler.html#8311aa7b7bc4102d02465b47ded3e7f3">sbIMetadataHandler::channel</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The object's nsIChannel. 
<p>
The object is assigned an nsIChannel from the <a class="el" href="interfacesb_i_metadata_manager.html">sbIMetadataManager</a> after it has successfully voted for an url. In the Read call, the implementor may choose to pull the url from the channel and use that directly, or open the channel (either itself or using an <a class="el" href="interfacesb_i_metadata_channel.html">sbIMetadataChannel</a> as a helper) and stream the data to be parsed.<p>
In general, for local files, it is faster to pull the url and handle the metadata read immediately rather than open the channel. For remote files, it's far easier to just use the channel infrastructure already setup. 
<p>
Definition at line <a class="el" href="sb_i_metadata_handler_8idl-source.html#l00079">79</a> of file <a class="el" href="sb_i_metadata_handler_8idl-source.html">sbIMetadataHandler.idl</a>.
</div>
</div><p>
<a class="anchor" name="978827eef884f62ce9da10d1344632a1"></a><!-- doxytag: member="sbIMetadataHandler::completed" ref="978827eef884f62ce9da10d1344632a1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">readonly attribute PRBool <a class="el" href="interfacesb_i_metadata_handler.html#978827eef884f62ce9da10d1344632a1">sbIMetadataHandler::completed</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Whether or not the object has completed its <a class="el" href="interfacesb_i_metadata_handler.html#089f9e2ab8e3494dc72dae7e937b0a56">read()</a> operation. 
<p>
This value is false until the handler completes its <a class="el" href="interfacesb_i_metadata_handler.html#089f9e2ab8e3494dc72dae7e937b0a56">read()</a> operation.<p>
It is up to the implementor to determine if a <a class="el" href="interfacesb_i_metadata_handler.html#089f9e2ab8e3494dc72dae7e937b0a56">read()</a> call should operate asynchronously or by blocking. The user of the handler should not attempt to get the <a class="el" href="interfacesb_i_metadata_values.html">sbIMetadataValues</a> object before the <a class="el" href="interfacesb_i_metadata_handler.html#089f9e2ab8e3494dc72dae7e937b0a56">read()</a> is completed. 
<p>
Definition at line <a class="el" href="sb_i_metadata_handler_8idl-source.html#l00064">64</a> of file <a class="el" href="sb_i_metadata_handler_8idl-source.html">sbIMetadataHandler.idl</a>.
</div>
</div><p>
<a class="anchor" name="0d705e855c88cb318a6ecbf69d0ea546"></a><!-- doxytag: member="sbIMetadataHandler::values" ref="0d705e855c88cb318a6ecbf69d0ea546" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">attribute <a class="el" href="interfacesb_i_metadata_values.html">sbIMetadataValues</a> <a class="el" href="interfacesb_i_metadata_handler.html#0d705e855c88cb318a6ecbf69d0ea546">sbIMetadataHandler::values</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The values object containing the metadata information. 
<p>
When the handler has successfully completed its <a class="el" href="interfacesb_i_metadata_handler.html#089f9e2ab8e3494dc72dae7e937b0a56">read()</a> operation, the values attribute will be filled with the metadata from the url. 
<p>
Definition at line <a class="el" href="sb_i_metadata_handler_8idl-source.html#l00053">53</a> of file <a class="el" href="sb_i_metadata_handler_8idl-source.html">sbIMetadataHandler.idl</a>.
</div>
</div><p>
<hr>The documentation for this interface was generated from the following file:<ul>
<li>C:/projects/songbird/components/mediacore/metadata/manager/public/<a class="el" href="sb_i_metadata_handler_8idl-source.html">sbIMetadataHandler.idl</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jan 10 14:43:51 2007 for Songbird by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
